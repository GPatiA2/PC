<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="es">
<head>
<!-- Generated by javadoc (1.8.0_181) on Thu May 20 22:36:11 CEST 2021 -->
<title>Servidor</title>
<meta name="date" content="2021-05-20">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Servidor";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":9,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Servidor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../servidor/RWSemaforos.html" title="class in servidor"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../index.html?servidor/Servidor.html" target="_top">Frames</a></li>
<li><a href="Servidor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">servidor</div>
<h2 title="Class Servidor" class="title">Class Servidor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>servidor.Servidor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Servidor</span>
extends java.lang.Object</pre>
<div class="block">Clase que implementa el servidor de la aplicacion</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Guille</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#Servidor-int-">Servidor</a></span>(int&nbsp;puerto)</code>
<div class="block">Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#aceptarConexion-coms.UserInfo-java.util.List-int-">aceptarConexion</a></span>(<a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
               java.util.List&lt;java.lang.String&gt;&nbsp;nombresficheros,
               int&nbsp;puerto)</code>
<div class="block">Acepta la conexión de un cliente y almacena su informacion (lista de ficheros que tiene, ip y nombre, y el puerto en el que esta conectado)</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#cerrarConexi%C3%B3n-coms.UserInfo-int-">cerrarConexión</a></span>(<a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
              int&nbsp;puerto2)</code>
<div class="block">Elimina los datos del usuario que quiere cerrar la conexion del sistema</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#enviarListaUsuarios-coms.UserInfo-int-">enviarListaUsuarios</a></span>(<a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
                   int&nbsp;puerto)</code>
<div class="block">Envia la lista de ficheros y los usuarios que los tienen al cliente que lo solicita</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#enviarPeerPreparado-int-java.net.InetAddress-int-java.lang.String-">enviarPeerPreparado</a></span>(int&nbsp;puertoreceptor,
                   java.net.InetAddress&nbsp;ip,
                   int&nbsp;puerto,
                   java.lang.String&nbsp;filename)</code>
<div class="block">Enviar un mensaje al cliente que ha realizado la peticion de un fichero con los datos para conectarse al cliente que lo emite</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#pedirFichero-java.lang.String-coms.UserInfo-int-">pedirFichero</a></span>(java.lang.String&nbsp;ficheroPedido,
            <a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
            int&nbsp;puerto)</code>
<div class="block">Envia un mensaje a uno de los clientes que tienen el fichero pedido diciendole que el usuario que se comunica a traves del puerto que se pasa como parametro esta solicitando el fichero indicado</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../servidor/Servidor.html#run--">run</a></span>()</code>
<div class="block">Metodo que atiende nuevas conexiones.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Servidor-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Servidor</h4>
<pre>public&nbsp;Servidor(int&nbsp;puerto)</pre>
<div class="block">Constructor. Recibe un puerto por el que escuchar y atender conexiones</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>puerto</code> - Entero que representa el puerto por el que atender nuevas conexiones</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Metodo que atiende nuevas conexiones.
 Genera un socket por cada conexion nueva, extrae los canales del socket y crea un proceso para atender
 peticiones de esa conexion.
 Indica al mensajero que guarde una asociacion del puerto por el que se realiza la conexion con el canal de salida al cliente conectado
 Guarda también una asociacion en el mapa oyentes entre el puerto y el oyente que atiende al cliente de ese puerto</div>
</li>
</ul>
<a name="enviarPeerPreparado-int-java.net.InetAddress-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enviarPeerPreparado</h4>
<pre>public&nbsp;void&nbsp;enviarPeerPreparado(int&nbsp;puertoreceptor,
                                java.net.InetAddress&nbsp;ip,
                                int&nbsp;puerto,
                                java.lang.String&nbsp;filename)</pre>
<div class="block">Enviar un mensaje al cliente que ha realizado la peticion de un fichero con los datos para conectarse al cliente que lo emite</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>puertoreceptor</code> - Puerto por el que el cliente emisor escucha nuevas conexiones</dd>
<dd><code>ip</code> - La IP del cliente que emite el fichero</dd>
<dd><code>puerto</code> - Puerto por el que el cliente que recibe el fichero esta conectado al servidor</dd>
<dd><code>filename</code> - Nombre del fichero que se va a enviar del cliente emisor al receptor</dd>
</dl>
</li>
</ul>
<a name="aceptarConexion-coms.UserInfo-java.util.List-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>aceptarConexion</h4>
<pre>public&nbsp;void&nbsp;aceptarConexion(<a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
                            java.util.List&lt;java.lang.String&gt;&nbsp;nombresficheros,
                            int&nbsp;puerto)</pre>
<div class="block">Acepta la conexión de un cliente y almacena su informacion (lista de ficheros que tiene, ip y nombre, y el puerto en el que esta conectado)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>origen</code> - IP e ID del cliente que se conecta al servidor</dd>
<dd><code>nombresficheros</code> - Nombres de los ficheros que tiene el cliente que se conecta</dd>
<dd><code>puerto</code> - Puerto por el que se realiza la conexion</dd>
</dl>
</li>
</ul>
<a name="enviarListaUsuarios-coms.UserInfo-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enviarListaUsuarios</h4>
<pre>public&nbsp;void&nbsp;enviarListaUsuarios(<a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
                                int&nbsp;puerto)</pre>
<div class="block">Envia la lista de ficheros y los usuarios que los tienen al cliente que lo solicita</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>origen</code> - ID e IP del usuario que pide la lista</dd>
<dd><code>puerto</code> - Puerto por el que se comunica el cliente que realiza la peticion</dd>
</dl>
</li>
</ul>
<a name="cerrarConexión-coms.UserInfo-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cerrarConexión</h4>
<pre>public&nbsp;void&nbsp;cerrarConexión(<a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
                           int&nbsp;puerto2)</pre>
<div class="block">Elimina los datos del usuario que quiere cerrar la conexion del sistema</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>origen</code> - IP e ID del cliente que quiere cerrar la conexion</dd>
<dd><code>puerto2</code> - Puerto por el que se comunica el cliente que pide cerrar la conexion</dd>
</dl>
</li>
</ul>
<a name="pedirFichero-java.lang.String-coms.UserInfo-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>pedirFichero</h4>
<pre>public&nbsp;void&nbsp;pedirFichero(java.lang.String&nbsp;ficheroPedido,
                         <a href="../coms/UserInfo.html" title="class in coms">UserInfo</a>&nbsp;origen,
                         int&nbsp;puerto)</pre>
<div class="block">Envia un mensaje a uno de los clientes que tienen el fichero pedido diciendole que el usuario que se comunica a traves del puerto que se pasa como parametro esta solicitando el fichero indicado</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ficheroPedido</code> - Nombre del fichero que uno de los clientes pide</dd>
<dd><code>origen</code> - ID e IP del usuario que pide el fichero</dd>
<dd><code>puerto</code> - Puerto por el que el usuario pide el fichero realiza la peticion</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Servidor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../servidor/RWSemaforos.html" title="class in servidor"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../index.html?servidor/Servidor.html" target="_top">Frames</a></li>
<li><a href="Servidor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
